# StarDestiny
2D игра на Unity на c#. Визуальная новелла с использованием таро, нумерологии, натальной карты.

Игра разбита на несколько глав со своими особенностями:
- Часть ввода пользовательских данных - класс DataCollector.

  Здесь пользователь вводит свои данные: имя, дата рождения, время рождения, часовой пояс города рождения, город рождения. На каждое поле есть валидация, обработаны сообщения пользователю об ошибках ввода. На вводе даты и времени автоматически подставляются точки и двоеточия (автозаполнение), на вводе часового пояса запятая автоматически переделывается в точку. Город рождения пользователь вводит в поле ввода и выбирает из выпадающего списка нужный. Список городов получается из запроса к API GeoNames (https://www.geonames.org/). После выбора города, также через API получаются долгота и широта города для дальнейших глав. Перед подтверждением данных, пользователь может отредактировать их через повторный проход ввода данных, при этом прошлые данные уже введены в поля. После проверки пользователь подтверждает данные -> все данные записываются в PlayerPrefs (встроенные данные игрока) для доступа во всех сценах. Переход к сцене пролога.
- Пролог - класс PrologueScene.

  Реализация пролога полностью наследуется от базового класса BaseChapterScene. В скрипте хранится скриптуемый объект типа DialogueLine (YAML-файл) с репликами персонажей. Каждая реплика хранит в себе айди персонажа, текст реплики, позицию персонажа (которая может быть слева, по центру, справа и не показывать), изображение для фона и аудио, если их необходимо изменить вместе с этой репликой, а также состояние отображение персонажа. Реплики переключаются при нажатии на экран через о работник событий ContentPanelClickHandler. При переключении между главами и между репликами с разными фоновыми изображениями происходит плавное затемнение экрана. После прохода всех реплик переход к сцене 1 главы.
- 1 глава "Натальная карта" - класс Chapter1Scene.

  Наследуется базовый класс BaseChapterScene. Также показывюется реплики персонажей. Переопределяется метод PlayChapter, добавляется учитывание дохода до вопроса (houseNumberQuestionReplicaIndex). Когда пользователь доходит до нужной реплики, показывается окно ввода, чтобы он ввёл ответ на вопрос персонажа. Если ответ неправильный, то пользователь ещё раз вводит ответ (пока не введёт правильный). если пользователь ввёл правильный ответ, то происходит отправка запроса к API FreeAstrologyApi (https://freeastrologyapi.com/). В запросе указываются пользовательские данные введённые в начале игры, ответом служит json, который хранит в себе натальную карту игрока. После этого происходит десериализация json файла, получаем нужные данные. Исходя из натальной карты, игроку отображаются соответсующие реплики, хранящиеся в ресурсах игры в скриптуемом объетке типа AstrologicalIdentifierResponse. Дальнейшие реплики показываются как в базовом классе. Переход к сцене 2 главы.
- 2 глава "Нумерология" - класс Chapter2Scene.

  Наследуется базовый класс BaseChapterScene. Также показывюется реплики персонажей. Переопределяется метод PlayChapter, добавляется учитывание дохода до вопроса (lifePathNumberQuestionReplicaIndex). Когда пользователь доходит до нужной реплики, показывается окно ввода, чтобы он ввёл ответ на вопрос персонажа. Если ответ неправильный, то пользователь ещё раз вводит ответ (пока не введёт правильный). Если пользователь ввёл правильный ответ, то игроку отображаются реплики из основного диалога. Когда пользователь доходит до следующей нужной реплики (lifePathNumberResponseReplicaIndex), ему показываются, исходя из ответа игрока на вопрос, реплики, хранящиеся в ресурсах игры в скриптуемом объетке типа AstrologicalIdentifierResponse. Дальнейшие реплики показываются как в базовом классе. Переход к сцене 2 главы.
- 3 глава "Таро" - класс Chapter3Scene.

  Наследуется базовый класс BaseChapterScene. Также показывюется реплики персонажей. Переопределяется метод PlayChapter, добавляется учитывание дохода до вопроса (tarotReadingReplicaIndex). Когда пользователь доходит до нужной реплики, показывается панель с отображением колоды карт таро. При нажатии на колоду происходит отправка запроса к API Vedic Astrology API (https://vedicastroapi.com/). Ответом служит json, который хранит в себе данные о рандомной карте Таро с предсказанием и ссылкой на изображения. После этого происходит десериализация json файла, получаем нужные данные. Игроку отображаются изображение полученной карты и реплики предсказания из ответа API. Дальнейшие реплики показываются как в базовом классе. Переход к сцене эпилога.
- Эпилог - класс EpilogueScene.

  Реализация пролога полностью наследуется от базового класса BaseChapterScene, только переопределяется метод Start, для отображения спрайта счастливого главного героя. Переход к сцене ввода пользовательских данных (зацикливание игры).

## Скриншоты
### Начальный экран

<img width="335" height="717" alt="image" src="https://github.com/user-attachments/assets/388df74d-e646-45ac-a9ad-fa4ab1755673" />

### Ввод и выбор города рождения в сцене ввода пользовательских данных

<img width="327" height="714" alt="image" src="https://github.com/user-attachments/assets/f2700d88-4863-4c1a-af0f-19ad1eaa010f" />

### Показ реплики персонажа

<img width="325" height="712" alt="image" src="https://github.com/user-attachments/assets/b3bafb53-41fc-42d8-a373-cb946df450c9" />

### Ввода номера пользователем в сцене 1 главы

<img width="330" height="707" alt="image" src="https://github.com/user-attachments/assets/f4e9724e-6400-4aa9-bbba-3615dedadb74" />

### Показ пользователю колоды карт таро в сцене 3 главы

<img width="326" height="708" alt="image" src="https://github.com/user-attachments/assets/365ed068-4d36-448b-bef5-27ebb53c5d66" />

## Особенности запуска:
Возможно, при скачивании проекта будут проблемы с отсутствием нужных пакетов. Необходимо проверить (или скачать) следуюшие пакеты:
- com.unity.nuget.newtonsoft-json (для десериализации json файлов)
- Unity UI
- Visual Studio Editor (для работы со скриптами в vs)
